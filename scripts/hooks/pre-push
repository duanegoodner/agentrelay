#!/bin/bash
# Prevent direct pushes to main. All changes should go through PRs.
while read local_ref local_sha remote_ref remote_sha; do
    if echo "$remote_ref" | grep -q "refs/heads/main$"; then
        echo "ERROR: Direct push to 'main' is not allowed."
        echo "Create a feature branch and open a PR instead."
        exit 1
    fi
done
exit 0
